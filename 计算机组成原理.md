# 一、 计算机系统概述
## 计算机性能指标
- MIPS: 每秒执行的指令数（百万级）
- MFLOPS: 每秒执行的浮点计算数（百万级）
## 冯·诺依曼体系结构
- 核心思想：存储程序
- 计算机硬件系统由运算器、存储器、控制器、输入设备和输出设备5大部件组成
- 指令和数据以同等地位存储在存储器中，形式上没有区别，但计算机应能区分它们。
- 指令和数据均用二进制代码表示
- 指令由操作码和地址码组成，操作码给出操作的类型，地址码给出操作数的地址。
### 计算机的功能部件
- CPU（中央处理器）包括运算器和控制器
- 存储器分为主存和辅存，中央处理器可以直接访问的程序和数据放在主存中。
- 主存也叫内存
## 计算机语言
- 机器语言-汇编语言-高级语言
### 翻译器
- 汇编程序（汇编器）：将汇编语言程序翻译为机器语言程序
- 解释程序（解释器）：将高级语言程序中的语句按执行顺序逐条翻译成机器指令并立即执行
- 编译程序（编译器）：将高级语言源程序翻译成汇编语言或者机器语言程序。
## 计算机系统的多级层次结构
### 软件研究对象
- 虚拟机器M4（高级语言机器）：用编译程序翻译成汇编语言程序。
- 虚拟机器M3（汇编语言机器）：用汇编语言程序翻译成机器语言程序
- 虚拟机器M2（操作系统机器）：用机器程序解释操作系统
----------- 软/硬件交互界面
- 传统机器M1（机器语言机器）：用微程序解释机器指令
- 微程序机器M0（微指令机器）：用硬件直接执行微指令
###
- 机器指令可以进行进一步的拆分，获得一组微指令的集合，这个集合叫做微程序。
- M1将指令解释为微程序，微程序的一系列微指令交由M0来完成。
## 计算机系统的工作原理
### 从源程序得到可执行程序（以c++为例）
- 预处理阶段：预处理器（cpp）对源程序中以“#”开头的命令进行处理，输出结果是一个.i扩展名的文件，例如#include就会将后面的头文件内容插入程序文件中
- 编译阶段：编译器（ccl）对预处理后的源程序进行编译，生成一个汇编语言程序，扩展名为.s，汇编语言程序中的每条语句，都用文本格式描述了一条机器语言指令
- 汇编阶段：汇编器（as）将.s文件翻译成机器语言指令，把这些指令打包成一个“可重定位目标程序”，扩展名为.o这是一个二进制文件。
- 链接阶段：链接器（ld）将多个可重定位目标程序和标准库函数合并成一个可执行目标程序，最终可执行程序被保存在磁盘上。
### 存储程序的基本思想
- 其实就是指令和数据都存放在内存中，指令分为操作码和操作数地址，数据就是数据。
#### 主存储器
- 主存储器包括存储体M，逻辑部件和控制电路。存储体由多个存储单元构成，每个存储单元可以存储一串二进制代码，称为一个“存储字”，存储字的二进制位数就是字长。
- 每个存储字都有唯一的一个编号，叫做存储字的地址，主存写入和读出存储字就是靠地址来完成的。
- 主存中还包括两个寄存器：MAR和MDR
##### MAR
- MAR用来存放想要访问的存储单元的地址，它的位数决定了能访问的存储单元的最大个数
##### MDR
- MDR用来存放从存储单元中取出或者准备向存储单元写入的数据，位数和字长相等。
#### 运算器
- 包括ACC、MQ、X最少三个寄存器，还必须包含算数逻辑单元（ALU）
#### 控制器
- 包括IR（指令寄存器）、PC（程序计数器）两个寄存器和控制单元（CU）组成
- PC和主存的MAR之间有直接通路，而且具有自动加1的功能
- IR的内容来自主存的MDR，包含操作码和地址码，操作码OP会送至CU，用来解析指令；地址码Ad会送至MAR用来取操作数。
- CU是核心组件，用来分析当前指令所需完成的操作，并发出各种微操作命令序列。完成一条指令操作，需要取指、分析和执行3个阶段。
#### I/O
- I/O包括各种外设及相应的接口，每个设备都由接口与主机联系。
### 硬件工作过程
#### 取指令
- PC-MAR-M-MDR-IR
#### 分析指令
- IR中OP部分-CU
#### 执行指令
- IR中Ad部分-MAR-M-MDR-ALU
#### PC
- 每取完一条指令，还必须计算下一条指令的地址，为取下一条指令做准备：PC+1 - PC
